{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import'./Filters.css';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Filters=_ref=>{let{data=[]}=_ref;const[query,setQuery]=useState('');const[filteredResults,setFilteredResults]=useState([]);const[isDropdownVisible,setIsDropdownVisible]=useState(false);// State to manage dropdown visibility\nconst searchRef=useRef(null);// Reference to the search container\nconst inputRef=useRef(null);// Reference to the input element\nconst navigate=useNavigate();useEffect(()=>{// Filter data based on the query\nif(query&&data.length>0){const results=data.filter(item=>{var _item$bill$bill$title;const title=(_item$bill$bill$title=item.bill.bill.title)===null||_item$bill$bill$title===void 0?void 0:_item$bill$bill$title.toLowerCase();const billNumber=`${item.bill.bill.type}.${item.bill.bill.number}`.toLowerCase();return title.includes(query.toLowerCase())||billNumber.includes(query.toLowerCase());});setFilteredResults(results.slice(0,10));// Limit results for dropdown\n}else{setFilteredResults([]);}},[query,data]);// Event listener to hide dropdown when clicking outside\nuseEffect(()=>{const handleClickOutside=event=>{if(searchRef.current&&!searchRef.current.contains(event.target)){setIsDropdownVisible(false);}};document.addEventListener('mousedown',handleClickOutside);return()=>{document.removeEventListener('mousedown',handleClickOutside);};},[]);const handleResultClick=id=>{navigate(`/bill/${id}`);};const handleFocus=()=>{setIsDropdownVisible(true);// Show dropdown when input is focused\n// Move cursor to the end of the current text\nif(inputRef.current){const length=inputRef.current.value.length;inputRef.current.setSelectionRange(length,length);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"filter\",ref:searchRef,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search bills by title or number\",value:query,onChange:e=>setQuery(e.target.value),onFocus:handleFocus// Show dropdown on focus and set cursor position\n,className:\"filter-input\",ref:inputRef// Reference to the input element\n}),isDropdownVisible&&filteredResults.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"filter-dropdown\",children:filteredResults.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"filter-dropdown-item\",onClick:()=>handleResultClick(item._id),children:[item.bill.bill.type,\".\",item.bill.bill.number,\": \",item.bill.bill.title]},item._id))})]});};export default Filters;","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","jsx","_jsx","jsxs","_jsxs","Filters","_ref","data","query","setQuery","filteredResults","setFilteredResults","isDropdownVisible","setIsDropdownVisible","searchRef","inputRef","navigate","length","results","filter","item","_item$bill$bill$title","title","bill","toLowerCase","billNumber","type","number","includes","slice","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","handleResultClick","id","handleFocus","value","setSelectionRange","className","ref","children","placeholder","onChange","e","onFocus","map","onClick","_id"],"sources":["/Users/andrewhadden/Desktop/Thesis/website/src/components/Filters.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport './Filters.css';\nimport { useNavigate } from 'react-router-dom';\n\nconst Filters = ({ data = [] }) => {\n    const [query, setQuery] = useState('');\n    const [filteredResults, setFilteredResults] = useState([]);\n    const [isDropdownVisible, setIsDropdownVisible] = useState(false); // State to manage dropdown visibility\n    const searchRef = useRef(null); // Reference to the search container\n    const inputRef = useRef(null); // Reference to the input element\n    const navigate = useNavigate();\n\n    useEffect(() => {\n        // Filter data based on the query\n        if (query && data.length > 0) {\n            const results = data.filter((item) => {\n                const title = item.bill.bill.title?.toLowerCase();\n                const billNumber = `${item.bill.bill.type}.${item.bill.bill.number}`.toLowerCase();\n                return title.includes(query.toLowerCase()) || billNumber.includes(query.toLowerCase());\n            });\n            setFilteredResults(results.slice(0, 10)); // Limit results for dropdown\n        } else {\n            setFilteredResults([]);\n        }\n    }, [query, data]);\n\n    // Event listener to hide dropdown when clicking outside\n    useEffect(() => {\n        const handleClickOutside = (event) => {\n            if (searchRef.current && !searchRef.current.contains(event.target)) {\n                setIsDropdownVisible(false);\n            }\n        };\n\n        document.addEventListener('mousedown', handleClickOutside);\n\n        return () => {\n            document.removeEventListener('mousedown', handleClickOutside);\n        };\n    }, []);\n\n    const handleResultClick = (id) => {\n        navigate(`/bill/${id}`);\n    };\n\n    const handleFocus = () => {\n        setIsDropdownVisible(true); // Show dropdown when input is focused\n\n        // Move cursor to the end of the current text\n        if (inputRef.current) {\n            const length = inputRef.current.value.length;\n            inputRef.current.setSelectionRange(length, length);\n        }\n    };\n\n    return (\n        <div className=\"filter\" ref={searchRef}>\n            <input\n                type=\"text\"\n                placeholder=\"Search bills by title or number\"\n                value={query}\n                onChange={(e) => setQuery(e.target.value)}\n                onFocus={handleFocus} // Show dropdown on focus and set cursor position\n                className=\"filter-input\"\n                ref={inputRef} // Reference to the input element\n            />\n\n            {isDropdownVisible && filteredResults.length > 0 && (\n                <div className=\"filter-dropdown\">\n                    {filteredResults.map((item) => (\n                        <div\n                            key={item._id}\n                            className=\"filter-dropdown-item\"\n                            onClick={() => handleResultClick(item._id)}\n                        >\n                            {item.bill.bill.type}.{item.bill.bill.number}: {item.bill.bill.title}\n                        </div>\n                    ))}\n                </div>\n            )}\n        </div>\n    );\n};\n\nexport default Filters;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}